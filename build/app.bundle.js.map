{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./AirPollMain.js","webpack:///./FirebaseCredentials.js"],"names":["allDataPoints","dataPointMarkers","dataPointCircles","dataGrid","showDataPoints","showDataCircles","showDataGrid","heatmap","initApp","config","firebase","initializeApp","dataPointsDbRef","firestore","collection","map","initMap","initHeatmap","addMapClickListener","addDataPointDbListener","addFormButtonListeners","window","google","maps","Map","document","getElementById","center","lat","lng","zoom","styles","featureType","stylers","visibility","disableDoubleClickZoom","streetViewControl","visualization","HeatmapLayer","radius","dissipating","addListener","mapLayer","dataPoint","latlng","latLng","toJSON","value","Math","floor","random","toString","date","Date","toUTCString","push","addNewDataPointClickToDb","addMarkerToMap","add","then","docRef","console","log","id","catch","error","get","dataPoints","forEach","data","getData","LatLng","hue","colorString","marker","Marker","position","label","visible","icon","path","SymbolPath","CIRCLE","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","scale","toDateString","toTimeString","split","drawCircle","opacity","Circle","viewTypeButton","onclick","innerText","hideDataPoints","hideDataCircles","hideHeatmap","displayGrid","hideDataGrid","showPointsButton","showCirclesButton","showHeatmapButton","hidden","classList","remove","dataPointMarker","setVisible","dataPointCircle","setMap","rectangle","text1","text2","text3","text4","bounds","getBounds","projection","getProjection","ne","fromLatLngToPoint","getNorthEast","sw","getSouthWest","pow","getZoom","widthPixels","x","heightPixels","y","totalSquareLengthPixels","min","gridLengthPixels","round","xOffsetOffScreen","yOffsetOffScreen","gridsAmountX","gridsAmountY","gridsXPixels","xPixels","maxX","gridsYPixels","yPixels","maxY","gridDataCollection","gridX","gridY","pixelPoint","pixelX","pixelY","maxGridValue","minGridValue","sumOfGridValues","totalGridValues","gridIndexToLatLngBounds","length","gridBounds","pointToLatLng","values","count","total","index","parseInt","avg","toFixed","parseFloat","gridBlendedDataCollection","blendGrid","drawRectangle","xIndex","yIndex","val","dontShowGrid","blendOperation","gridValues","isNaN","startX","startY","gridLength","nePoint","Point","fromPointToLatLng","swPoint","LatLngBounds","Rectangle","firebaseCredentials","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./AirPollMain.js\");\n","import { firebaseCredentials } from './FirebaseCredentials';\n\nvar allDataPoints = [];\nvar dataPointMarkers = [];\nvar dataPointCircles = [];\nvar dataGrid = [];\n\nvar showDataPoints = false;\nvar showDataCircles = false;\nvar showDataGrid = false;\nvar heatmap;\n\n\n/**\n * Creates a map object with a click listener and a heatmap.\n */\nfunction initApp() {\n\tvar config = firebaseCredentials(); //Firebase API keys\n\n\tfirebase.initializeApp(config);\n\tvar dataPointsDbRef = firebase.firestore().collection('datapoints');\n\n\tvar map = initMap();\n\theatmap = initHeatmap(map);\n\n\taddMapClickListener(map, dataPointsDbRef);\n\taddDataPointDbListener(dataPointsDbRef, map);\n\taddFormButtonListeners(map);\n}\n\nwindow.initApp = initApp;\n\nfunction initMap() {\n\treturn new google.maps.Map(document.getElementById('map'), {\n\t\tcenter: {lat: 50.9365, lng: -1.396},\n\t\tzoom: 16,\n\t\t//hide points of interest and public transport\n\t\tstyles: [{\n\t\t\tfeatureType: 'poi',\n\t\t\tstylers: [{ visibility: 'off' }]\n\t\t}, {\n\t\t\tfeatureType: 'transit.station',\n\t\t\tstylers: [{ visibility: 'off' }]\n\t\t}],\n\t\tdisableDoubleClickZoom: true,\n\t\tstreetViewControl: false\n\t});\n}\n\n//Heatmap is only used to show where we have data\nfunction initHeatmap() {\n\treturn new google.maps.visualization.HeatmapLayer({radius: 0.005, dissipating: false});\n}\n\nfunction addMapClickListener(map, dataPointsDbRef) {\n\tmap.addListener('click', function(mapLayer) {\n\n\t\tvar dataPoint = {\n\t\t\tlatlng: mapLayer.latLng.toJSON(),\n\t\t\tvalue: Math.floor((Math.random() * 100)).toString(),\n\t\t\tdate: new Date().toUTCString()\n\t\t};\n\t\tallDataPoints.push(dataPoint);\n\n\t\taddNewDataPointClickToDb(dataPointsDbRef, dataPoint);\n\t\taddMarkerToMap(map, dataPoint);\n\t});\n}\n\nfunction addNewDataPointClickToDb(dataPointsDbRef, dataPoint) {\n\tdataPointsDbRef.add(dataPoint).then(function(docRef) {\n\t\tconsole.log(\"Document written with ID: \", docRef.id);\n\t}).catch(function(error) {\n\t\tconsole.error(\"Error adding document: \", error);\n\t});\n}\n\nfunction addDataPointDbListener(dataPointsDbRef, map) {\n\tdataPointsDbRef.get().then(function(dataPoints) {\n\t\tdataPoints.forEach(function(dataPoint) {\n\t\t\tallDataPoints.push(dataPoint.data());\n\t\t\taddMarkerToMap(map, dataPoint.data());\n\t\t});\n\t});\n\n\t//TODO: get datapoints as they are added to database\n}\n\n\n\nfunction addMarkerToMap(map, dataPoint) {\n\tvar latlng = dataPoint.latlng;\n\theatmap.getData().push(new google.maps.LatLng(latlng.lat, latlng.lng));\n\tvar hue = (100 - dataPoint.value) * 0.6;\n\tvar colorString = \"hsl(\" + hue +\", 100%, 50%)\";\n\tvar marker = new google.maps.Marker({\n\t\tposition: latlng,\n\t\tlabel: dataPoint.value.toString(),\n\t\tmap: map,\n\t\tvisible: showDataPoints,\n\t\ticon: {\n\t\t\tpath: google.maps.SymbolPath.CIRCLE,\n\t\t\tstrokeColor: colorString,\n\t\t\tstrokeOpacity: 0,\n\t\t\tstrokeWeight: 1,\n\t\t\tfillColor: colorString,\n\t\t\tfillOpacity: 0,\n\t\t\tscale: 100\n\t\t}\n\t});\n\n\tdataPointMarkers.push(marker);\n\n\tmarker.addListener('click', function() {\n\t\tvar date = new Date(dataPoint.date);\n\t\tdocument.getElementById('date').value = date.toDateString();\n\t\tdocument.getElementById('time').value = date.toTimeString().split(' ')[0];\n\t\tdocument.getElementById('value').value = dataPoint.value;\n\t});\n\n\tdrawCircle(latlng, map, colorString, 0.5, 50);\n\tdrawCircle(latlng, map, colorString, 0.3, 100);\n\tdrawCircle(latlng, map, colorString, 0.1, 200);\n}\n\nfunction drawCircle(latlng, map, colorString, opacity, radius) {\n\tdataPointCircles.push(\n\t\tnew google.maps.Circle({\n\t\t\tstrokeOpacity: 0,\n\t\t\tfillColor: colorString,\n\t\t\tfillOpacity: opacity,\n\t\t\tmap: map,\n\t\t\tcenter: latlng,\n\t\t\tradius: radius,\n\t\t\tvisible: showDataCircles\n\t\t})\n\t);\n}\n\nfunction addFormButtonListeners(map) {\n\n\n\tvar viewTypeButton = document.getElementById('viewType');\n\tviewTypeButton.onclick = function () {\n\t\tif (viewTypeButton.innerText === 'Switch to Grid View') {\n\t\t\tviewTypeButton.innerText = 'Switch to Data Points View';\n\t\t\thideDataPoints(true);\n\t\t\thideDataCircles(true);\n\t\t\thideHeatmap(true, map);\n\n\t\t\tdisplayGrid(map);\n\t\t} else {\n\t\t\tviewTypeButton.innerText = 'Switch to Grid View';\n\t\t\thideDataPoints(false);\n\t\t\thideDataCircles(false);\n\t\t\thideHeatmap(true, map);\n\t\t\thideDataGrid(true);\n\t\t}\n\t};\n\n\tvar showPointsButton = document.getElementById('showPoints');\n\tshowPointsButton.onclick = function () {\n\t\tif (showPointsButton.innerText === 'Show Data Points') {\n\t\t\thideDataPoints(false);\n\t\t} else {\n\t\t\thideDataPoints(true);\n\t\t}\n\t};\n\n\tvar showCirclesButton = document.getElementById('showCircles');\n\tshowCirclesButton.onclick = function () {\n\t\tif (showCirclesButton.innerText === 'Show Data Circles') {\n\t\t\thideDataCircles(false);\n\t\t} else {\n\t\t\thideDataCircles(true);\n\t\t}\n\t};\n\n\tvar showHeatmapButton = document.getElementById('showHeatmap');\n\tshowHeatmapButton.onclick = function () {\n\t\tif (showHeatmapButton.innerText === 'Show Heatmap') {\n\t\t\thideHeatmap(false, map);\n\t\t} else {\n\t\t\thideHeatmap(true, map);\n\t\t}\n\t};\n}\n\nfunction hideDataPoints(hidden) {\n\tvar showPointsButton = document.getElementById('showPoints');\n\tif (hidden) {\n\t\tshowPointsButton.innerText = 'Show Data Points';\n\t\tshowPointsButton.classList.remove('btn-primary');\n\t\tshowPointsButton.classList.add('btn-outline-primary');\n\t} else {\n\t\tshowPointsButton.innerText = 'Hide Data Points';\n\t\tshowPointsButton.classList.remove('btn-outline-primary');\n\t\tshowPointsButton.classList.add('btn-primary');\n\t}\n\tshowDataPoints = !hidden;\n\tdataPointMarkers.forEach(function (dataPointMarker) {\n\t\tdataPointMarker.setVisible(!hidden);\n\t});\n}\n\nfunction hideDataCircles(hidden) {\n\tvar showCirclesButton = document.getElementById('showCircles');\n\tif (hidden) {\n\t\tshowCirclesButton.innerText = 'Show Data Circles';\n\t\tshowCirclesButton.classList.remove('btn-primary');\n\t\tshowCirclesButton.classList.add('btn-outline-primary');\n\t} else {\n\t\tshowCirclesButton.innerText = 'Hide Data Circles';\n\t\tshowCirclesButton.classList.remove('btn-outline-primary');\n\t\tshowCirclesButton.classList.add('btn-primary');\n\t}\n\tshowDataCircles = !hidden;\n\tdataPointCircles.forEach(function (dataPointCircle) {\n\t\tdataPointCircle.setVisible(!hidden);\n\t});\n}\n\nfunction hideHeatmap(hidden, map) {\n\tvar showHeatmapButton = document.getElementById('showHeatmap');\n\tif (hidden) {\n\t\tshowHeatmapButton.innerText = 'Show Heatmap';\n\t\tshowHeatmapButton.classList.remove('btn-primary');\n\t\tshowHeatmapButton.classList.add('btn-outline-primary');\n\t\theatmap.setMap(null);\n\t} else {\n\t\tshowHeatmapButton.innerText = 'Hide Heatmap';\n\t\tshowHeatmapButton.classList.remove('btn-outline-primary');\n\t\tshowHeatmapButton.classList.add('btn-primary');\n\t\theatmap.setMap(map);\n\t}\n}\n\nfunction hideDataGrid(hidden) {\n\tdataGrid.forEach(function (rectangle) {\n\t\trectangle.setVisible(!hidden);\n\t})\n}\n\nfunction displayGrid(map) {\n\tdataGrid = [];\n\n\tvar text1 = document.getElementById('date');\n\tvar text2 = document.getElementById('time');\n\tvar text3 = document.getElementById('value');\n\tvar text4 = document.getElementById('user');\n\n\t//Step1: find biggest square (in pixels) on map\n\tvar bounds = map.getBounds();\n\tvar projection = map.getProjection();\n\n\tvar ne = projection.fromLatLngToPoint(bounds.getNorthEast());\n\tvar sw = projection.fromLatLngToPoint(bounds.getSouthWest());\n\n\tvar scale = Math.pow(2, map.getZoom());\n\n\tvar widthPixels = (ne.x - sw.x) * scale;\n\tvar heightPixels = (sw.y - ne.y) * scale;\n\n\tvar totalSquareLengthPixels = Math.min(widthPixels, heightPixels);\n\n\t//Step 2: find grid size in pixels\n\tvar gridLengthPixels = Math.round(totalSquareLengthPixels / 20); //Eventually changeable by slider\n\n\n\t//Step 3: Create grid data structure\n\tvar xOffsetOffScreen = gridLengthPixels + (0.5 * (widthPixels % gridLengthPixels));\n\tvar yOffsetOffScreen = gridLengthPixels + (0.5 * (heightPixels % gridLengthPixels));\n\n\tvar gridsAmountX = 3 + Math.round(widthPixels / gridLengthPixels);\n\tvar gridsAmountY = 3 + Math.round(heightPixels / gridLengthPixels); //todo recalculate\n\n\n\t//Using Pixels for grids because converting each grid coordinate to latlng and comparing each data point to a\n\t//list of lats and lngs takes much longer than finding pixel coordinate of datapoint! (then grid is easy to find)\n\n\tvar gridsXPixels = [];\n\tfor (var xPixels = -xOffsetOffScreen; xPixels < widthPixels + gridLengthPixels; xPixels += gridLengthPixels) {\n\t\tgridsXPixels.push(Math.round(xPixels));\n\t}\n\tvar maxX = xPixels + gridLengthPixels;\n\n\tvar gridsYPixels = [];\n\tfor (var yPixels = -yOffsetOffScreen; yPixels < heightPixels + gridLengthPixels; yPixels += gridLengthPixels) {\n\t\tgridsYPixels.push(Math.round(yPixels));\n\t}\n\tvar maxY = yPixels + gridLengthPixels;\n\n\t//3D array! [X Position][Y Position][List of data in grid]\n\tvar gridDataCollection = [];\n\tfor (var gridX=0; gridX< gridsAmountX+1; gridX++) {\n\t\tgridDataCollection[gridX] = [];\n\t\tfor (var gridY=0; gridY< gridsAmountY+1; gridY++) {\n\t\t\tgridDataCollection[gridX][gridY] = [];\n\t\t}\n\t}\n\n\tallDataPoints.forEach(function (dataPoint) {\n\t\tvar latlng = new google.maps.LatLng(dataPoint.latlng.lat, dataPoint.latlng.lng);\n\t\tvar pixelPoint = projection.fromLatLngToPoint(latlng);\n\t\tvar pixelX = Math.round((pixelPoint.x - sw.x) * scale);\n\t\tvar pixelY = Math.round((pixelPoint.y - ne.y) * scale);\n\n\t\tif (pixelX >= -xOffsetOffScreen && pixelX < maxX\n\t\t\t&& pixelY >= -yOffsetOffScreen && pixelY < maxY) {\n\t\t\tvar gridX = ((pixelX + xOffsetOffScreen) / gridLengthPixels);\n\t\t\tvar gridY = ((pixelY + yOffsetOffScreen) / gridLengthPixels);\n\t\t\tgridDataCollection[(Math.floor(gridX))][Math.floor(gridY)].push(dataPoint.value);\n\t\t}\n\t});\n\n\tvar maxGridValue = 0;\n\tvar minGridValue = 100;\n\tvar sumOfGridValues = 0;\n\tvar totalGridValues = 0; //number of non-empty grids to calculate average grid value\n\n\n\tvar gridIndexToLatLngBounds = [];\n\n\tfor (gridX=0; gridX< gridsXPixels.length + 1; gridX++) {\n\t\tgridIndexToLatLngBounds[gridX] = [];\n\t\tfor (gridY=0; gridY< gridsYPixels.length + 1; gridY++) {\n\t\t\tvar gridBounds = pointToLatLng(projection, gridsXPixels[gridX], gridsYPixels[gridY], sw.x, ne.y, scale, gridLengthPixels);\n\t\t\tgridIndexToLatLngBounds[gridX][gridY] = gridBounds;\n\n\t\t\tvar values = gridDataCollection[gridX][gridY];\n\n\t\t\tvar count = values.length;\n\t\t\tif (count === 0) {\n\t\t\t\tgridDataCollection[gridX][gridY] = null;\n\t\t\t} else {\n\t\t\t\tvar total = 0;\n\t\t\t\tfor (var index=0; index<count; index++) {\n\t\t\t\t\ttotal += parseInt(gridDataCollection[gridX][gridY][index]);\n\t\t\t\t}\n\t\t\t\tvar avg = (total / count).toFixed(2);\n\t\t\t\tgridDataCollection[gridX][gridY] = avg;\n\n\t\t\t\tif (avg > maxGridValue) {\n\t\t\t\t\tmaxGridValue = avg;\n\t\t\t\t}\n\t\t\t\tif (avg < minGridValue) {\n\t\t\t\t\tmaxGridValue = avg;\n\t\t\t\t}\n\t\t\t\tsumOfGridValues += parseFloat(avg);\n\t\t\t\ttotalGridValues++;\n\t\t\t}\n\t\t}\n\t}\n\n\t// console.log(gridDataCollection);\n\n\t/*for (gridX=0; gridX< gridsXPixels.length + 1; gridX++) {\n\t\tfor (gridY=0; gridY< gridsYPixels.length + 1; gridY++) {\n\t\t\tdrawRectangle(map, gridIndexToLatLngBounds[gridX][gridY], gridDataCollection[gridX][gridY]);\n\t\t}\n\t}*/\n\n\tvar gridBlendedDataCollection = blendGrid(gridDataCollection);\n\n\tconsole.log(gridBlendedDataCollection);\n\tfor (gridX=0; gridX< gridsXPixels.length-1; gridX++) {\n\t\tfor (gridY=0; gridY< gridsYPixels.length-1; gridY++) {\n\t\t\tdrawRectangle(map, gridIndexToLatLngBounds[gridX+1][gridY+1], gridBlendedDataCollection[gridX][gridY]);\n\t\t}\n\t}\n}\n\nfunction blendGrid(gridDataCollection) {\n\tvar gridBlendedDataCollection = [];\n\tfor (var gridX=1; gridX < gridDataCollection.length -1; gridX++) {\n\t\tgridBlendedDataCollection[gridX-1] = [];\n\t\tfor (var gridY=1; gridY < gridDataCollection[gridX].length -1; gridY++) {\n\t\t\tvar total = 0; // total values for grid of 3 x 3\n\t\t\tvar count = 0;\n\n\n\t\t\tfor (var xIndex=gridX-1; xIndex<=gridX+1;xIndex++){\n\t\t\t\tfor (var yIndex=gridY-1; yIndex<=gridY+1;yIndex++){\n\t\t\t\t\tvar val = gridDataCollection[xIndex][yIndex];\n\t\t\t\t\tif (val != null) {\n\t\t\t\t\t\tcount += parseInt(1);\n\t\t\t\t\t\ttotal += parseFloat(val);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar dontShowGrid = ((count < 3) && (gridDataCollection[gridX][gridY] == null));\n\t\t\tif (dontShowGrid) {\n\t\t\t\tgridBlendedDataCollection[gridX-1][gridY-1] = null;\n\t\t\t} else {\n\t\t\t\tvar avg = total / count;\n\t\t\t\tgridBlendedDataCollection[gridX-1][gridY-1] = avg;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn gridBlendedDataCollection;\n}\n\nfunction blendOperation(gridValues, x, y, count, total) {\n\tvar val = gridValues[x][y];\n\tif (!isNaN(val)) {\n\t\tcount += parseInt(1);\n\t\ttotal += parseInt(val);\n\t}\n}\n\nfunction pointToLatLng(projection, x, y, startX, startY, scale, gridLength) {\n\tvar nePoint = new google.maps.Point((x/scale) + startX, (y/scale) + startY);\n\tvar ne = projection.fromPointToLatLng(nePoint);\n\tvar swPoint = new google.maps.Point(((x+gridLength)/scale) + startX, ((y+gridLength)/scale) + startY);\n\tvar sw = projection.fromPointToLatLng(swPoint);\n\n\tvar bounds = new google.maps.LatLngBounds(ne, sw);\n\treturn bounds;\n}\n\nfunction drawRectangle(map, bounds, value) {\n\tif (value != null) {\n\t\tvar hue = (100 - value) * 0.6;\n\t\tvar colorString = \"hsl(\" + hue + \", 100%, 50%)\";\n\t\tdataGrid.push(new google.maps.Rectangle({\n\t\t\tstrokeWeight: 0,\n\t\t\tfillColor: colorString,\n\t\t\tfillOpacity: 0.7,\n\t\t\tmap: map,\n\t\t\tbounds: bounds\n\t\t}));\n\t}\n}","export function firebaseCredentials() {\n  return {\n    apiKey: \"AIzaSyCTY-5_e4vfG_hURD10OVQ-wOkkiBQpZlI\",\n    authDomain: \"airpoll-830fa.firebaseapp.com\",\n    databaseURL: \"https://airpoll-830fa.firebaseio.com\",\n    projectId: \"airpoll-830fa\",\n    storageBucket: \"airpoll-830fa.appspot.com\",\n    messagingSenderId: \"512203516382\"\n  };\n}"],"sourceRoot":""}