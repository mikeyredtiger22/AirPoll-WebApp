{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./AirPollMain.js","webpack:///./ButtonEventHandler.js","webpack:///./DataVisualisationController.js","webpack:///./FirebaseCredentials.js","webpack:///./GridOverlay.js"],"names":["initApp","config","firebase","initializeApp","dataPointsDbRef","firestore","collection","map","initMap","addMapClickListener","getDataPointsFromDB","dataPoints","window","google","maps","Map","document","getElementById","center","lat","lng","zoom","styles","featureType","stylers","visibility","disableDoubleClickZoom","streetViewControl","addListener","mapLayer","dataPoint","latlng","latLng","toJSON","value","Math","floor","random","toString","date","Date","toUTCString","addNewDataPointClickToDb","add","then","docRef","console","log","id","catch","error","callback","get","docs","showDataGrid","showDataCircles","showDataPoints","showDensityHeatmap","showDataGridVal","showDataCirclesVal","showDataPointsVal","showDensityHeatmapVal","initButtonEventHandler","showDataGridM","showDataCirclesM","showDataPointsM","showDensityHeatmapM","addFormButtonListeners","showGridButton","showPointsButton","showCirclesButton","showHeatmapButton","innerText","onclick","styleButton","button","highlight","classList","remove","allDataPoints","dataPointMarkers","dataPointCircles","dataGrid","showDataPointMarkers","showDataCircleMarkers","showDataGridOverlay","heatmap","initDVController","mapObject","data","visualization","HeatmapLayer","radius","dissipating","initDataCirclesPointsAndHeatmap","forEach","addMarkerToMap","show","dataPointCircle","setVisible","dataPointMarker","setMap","getData","push","LatLng","hue","colorString","marker","Marker","position","visible","icon","path","SymbolPath","CIRCLE","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","scale","toDateString","toTimeString","split","drawCircle","opacity","d1","d2","circle","Circle","firebaseCredentials","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","projection","ne","sw","gridLengthPixels","initGridOverlay","hideDataGrid","rectangle","latLngToPixels","latlng2","point","fromLatLngToPoint","pixelX","round","x","pixelY","y","displayGrid","grids","bounds","getBounds","getProjection","getNorthEast","getSouthWest","pow","getZoom","widthPixels","heightPixels","min","gridsCountX","ceil","gridsCountY","borderPixelLength","pixelStartX","pixelStartY","pixelEndX","pixelEndY","gridDataCollection","gridX","gridY","gridToBounds","avgValue","count","length","sum","reduce","a","b","parseInt","average","drawRectangle","blendGrid","gridBlendedDataCollection","total","xIndex","yIndex","val","parseFloat","dontShowGrid","avg","blendOperation","gridValues","isNaN","pixelToPoint","Point","nePoint","swPoint","fromPointToLatLng","LatLngBounds","Rectangle"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./AirPollMain.js\");\n","import { firebaseCredentials } from './FirebaseCredentials';\nimport { initDVController } from './DataVisualisationController';\n\nfunction initApp() {\n  const config = firebaseCredentials(); //Firebase API keys\n  firebase.initializeApp(config);\n  const dataPointsDbRef = firebase.firestore().collection('datapoints');\n\n  const map = initMap();\n\n  addMapClickListener(map, dataPointsDbRef);\n\n  getDataPointsFromDB(dataPointsDbRef, function(dataPoints) {\n    initDVController(map, dataPoints);\n  });\n}\n\nwindow.initApp = initApp;\n\nfunction initMap() {\n  return new google.maps.Map(document.getElementById('map'), {\n    center: {lat: 50.9365, lng: -1.396},\n    zoom: 15,\n    //hide points of interest and public transport\n    styles: [{\n      featureType: 'poi',\n      stylers: [{visibility: 'off'}],\n    }, {\n      featureType: 'transit.station',\n      stylers: [{visibility: 'off'}],\n    }],\n    disableDoubleClickZoom: true,\n    streetViewControl: false,\n  });\n}\n\nfunction addMapClickListener(map, dataPointsDbRef) {\n  map.addListener('click', function (mapLayer) {\n\n    const dataPoint = {\n      latlng: mapLayer.latLng.toJSON(),\n      value: Math.floor((Math.random() * 100)).toString(),\n      date: new Date().toUTCString(),\n    };\n\n    addNewDataPointClickToDb(dataPointsDbRef, dataPoint);\n  });\n}\n\nfunction addNewDataPointClickToDb(dataPointsDbRef, dataPoint) {\n  dataPointsDbRef.add(dataPoint).then(function (docRef) {\n    console.log('Document written with ID: ', docRef.id);\n  }).catch(function (error) {\n    console.error('Error adding document: ', error);\n  });\n}\n\nfunction getDataPointsFromDB(dataPointsDbRef, callback) {\n  dataPointsDbRef.get().then(function (dataPoints) {\n    callback(dataPoints.docs);\n  });\n}\n\n//TODO: get datapoints as they are added to database\n","let showDataGrid;\nlet showDataCircles;\nlet showDataPoints;\nlet showDensityHeatmap;\n\nlet showDataGridVal;\nlet showDataCirclesVal;\nlet showDataPointsVal;\nlet showDensityHeatmapVal;\n\nfunction initButtonEventHandler(showDataGridM, showDataCirclesM, showDataPointsM, showDensityHeatmapM) {\n  showDataGrid = showDataGridM;\n  showDataCircles = showDataCirclesM;\n  showDataPoints = showDataPointsM;\n  showDensityHeatmap = showDensityHeatmapM;\n\n  addFormButtonListeners();\n}\n\nfunction addFormButtonListeners() {\n\n  const showGridButton = document.getElementById('showGrid');\n  const showPointsButton = document.getElementById('showPoints');\n  const showCirclesButton = document.getElementById('showCircles');\n  const showHeatmapButton = document.getElementById('showHeatmap');\n\n  showDataGridVal = !(showGridButton.innerText === 'Show Data Grid');\n  showDataPointsVal = !(showPointsButton.innerText === 'Show Data Points');\n  showDataCirclesVal = !(showCirclesButton.innerText === 'Show Data Circles');\n  showDensityHeatmapVal = !(showHeatmapButton.innerText === 'Show Heatmap');\n\n  showGridButton.onclick = function () {\n    styleButton(showGridButton, !showDataGridVal);\n    showGridButton.innerText = showDataGridVal ? 'Show Data Grid' : 'Hide Data Grid';\n    showDataGridVal =! showDataGridVal;\n    showDataGrid(showDataGridVal);\n  };\n\n  showPointsButton.onclick = function () {\n    styleButton(showPointsButton, !showDataPointsVal);\n    showPointsButton.innerText = showDataPointsVal ? 'Show Data Points' : 'Hide Data Points';\n    showDataPointsVal =! showDataPointsVal;\n    showDataPoints(showDataPointsVal);\n  };\n\n  showCirclesButton.onclick = function () {\n    styleButton(showCirclesButton, !showDataCirclesVal);\n    showCirclesButton.innerText = showDataCirclesVal ? 'Show Data Circles' : 'Hide Data Circles';\n    showDataCirclesVal =! showDataCirclesVal;\n    showDataCircles(showDataCirclesVal);\n  };\n\n  showHeatmapButton.onclick = function () {\n    styleButton(showHeatmapButton, !showDensityHeatmapVal);\n    showHeatmapButton.innerText = showDensityHeatmapVal ? 'Show Density Heatmap' : 'Hide Density Heatmap';\n    showDensityHeatmapVal =! showDensityHeatmapVal;\n    showDensityHeatmap(showDensityHeatmapVal);\n  };\n}\n\nfunction styleButton(button, highlight) {\n  if (highlight) {\n    button.classList.remove('btn-outline-primary');\n    button.classList.add('btn-primary');\n  } else {\n    button.classList.remove('btn-primary');\n    button.classList.add('btn-outline-primary');\n  }\n}\n\nexport {\n  initButtonEventHandler,\n};","import { initButtonEventHandler } from './ButtonEventHandler';\nimport { displayGrid, hideDataGrid, initGridOverlay } from './GridOverlay';\n\nlet map;\nlet dataPoints;\n\nlet allDataPoints = [];\nlet dataPointMarkers = [];\nlet dataPointCircles = [];\nlet dataGrid = [];\n\nlet showDataPointMarkers = true;\nlet showDataCircleMarkers = false;\nlet showDataGridOverlay = false;\nlet heatmap;\n\nfunction initDVController(mapObject, dataPoints) {\n  allDataPoints = dataPoints.map(dataPoint => dataPoint.data());\n  map = mapObject;\n  heatmap = new google.maps.visualization.HeatmapLayer({radius: 0.005, dissipating: false});\n\n  initButtonEventHandler(showDataGrid, showDataCircles, showDataPoints, showDensityHeatmap);\n  initDataCirclesPointsAndHeatmap();\n  initGridOverlay(map, allDataPoints);\n}\n\nfunction initDataCirclesPointsAndHeatmap() {\n  allDataPoints.forEach(function(dataPoint) {\n    addMarkerToMap(dataPoint);\n  });\n}\n\nfunction showDataGrid(show) {\n  if (show) {\n    displayGrid();\n  } else {\n    hideDataGrid();\n  }\n}\n\nfunction showDataCircles(show) {\n  dataPointCircles.forEach(function (dataPointCircle) {\n    dataPointCircle.setVisible(show);\n  });\n}\n\nfunction showDataPoints(show) {\n  showDataPoints = show;\n  dataPointMarkers.forEach(function (dataPointMarker) {\n    dataPointMarker.setVisible(show);\n    // dataPointMarker.setMap(show ? map : null);\n  });\n}\n\nfunction showDensityHeatmap(show) {\n  heatmap.setMap(show ? map : null);\n}\n\nfunction addMarkerToMap(dataPoint) {\n  // todo split up\n  const latlng = dataPoint.latlng;\n  heatmap.getData().push(new google.maps.LatLng(latlng.lat, latlng.lng));\n  const hue = (100 - dataPoint.value) * 0.6;\n  const colorString = 'hsl(' + hue + ', 100%, 50%)';\n  const marker = new google.maps.Marker({\n    position: latlng,\n    map: map,\n    visible: showDataPointMarkers,\n    icon: {\n      path: google.maps.SymbolPath.CIRCLE,\n      strokeColor: colorString,\n      strokeOpacity: 0.8,\n      strokeWeight: 2,\n      fillColor: colorString,\n      fillOpacity: 0.2,\n      scale: 5,\n    },\n  });\n\n  dataPointMarkers.push(marker);\n\n  const date = new Date(dataPoint.date);\n  marker.addListener('click', function () {\n    document.getElementById('date').value = date.toDateString();\n    document.getElementById('time').value = date.toTimeString().split(' ')[0];\n    document.getElementById('value').value = dataPoint.value;\n  });\n\n  drawCircle(latlng, map, colorString, 0.3, 50, date, dataPoint.value);\n  drawCircle(latlng, map, colorString, 0.2, 100, date, dataPoint.value);\n  drawCircle(latlng, map, colorString, 0.1, 200, date, dataPoint.value);\n}\n\nfunction drawCircle(latlng, map, colorString, opacity, radius, d1, d2) {\n  let circle = new google.maps.Circle({\n    strokeOpacity: 0,\n    fillColor: colorString,\n    fillOpacity: opacity,\n    map: map,\n    center: latlng,\n    radius: radius,\n    visible: showDataCircleMarkers,\n  });\n  dataPointCircles.push(circle);\n  circle.addListener('click', function () {\n    document.getElementById('date').value = d1.toDateString();\n    document.getElementById('time').value = d1.toTimeString().split(' ')[0];\n    document.getElementById('value').value = d2;\n  });\n}\n\nexport {\n  initDVController,\n  addMarkerToMap,\n}","export function firebaseCredentials() {\n  return {\n    apiKey: \"AIzaSyCTY-5_e4vfG_hURD10OVQ-wOkkiBQpZlI\",\n    authDomain: \"airpoll-830fa.firebaseapp.com\",\n    databaseURL: \"https://airpoll-830fa.firebaseio.com\",\n    projectId: \"airpoll-830fa\",\n    storageBucket: \"airpoll-830fa.appspot.com\",\n    messagingSenderId: \"512203516382\"\n  };\n}","let map;\nlet allDataPoints;\nlet dataGrid = [];\nlet scale;\nlet projection;\nlet ne;\nlet sw;\nlet gridLengthPixels;\n\nfunction initGridOverlay(mapObject, dataPoints) {\n  map = mapObject;\n  allDataPoints = dataPoints;\n}\n\nfunction hideDataGrid() {\n  dataGrid.forEach(function (rectangle) {\n    rectangle.setVisible(false);\n  });\n}\n\nfunction latLngToPixels(latlng, callback) {\n  let latlng2 = new google.maps.LatLng(latlng.lat, latlng.lng);\n  let point = projection.fromLatLngToPoint(latlng2);\n  let pixelX = Math.round((point.x - sw.x) * scale);\n  let pixelY = Math.round((point.y - ne.y) * scale);\n  callback(pixelX, pixelY);\n}\n\nfunction displayGrid() {\n\n  //Input:\n  let grids = 20; // 20 grids, end to end on smallest screen dimension\n\n  let bounds = map.getBounds();\n  projection = map.getProjection();\n\n  ne = projection.fromLatLngToPoint(bounds.getNorthEast());\n  sw = projection.fromLatLngToPoint(bounds.getSouthWest());\n\n  scale = Math.pow(2, map.getZoom());\n\n  let widthPixels = Math.round((ne.x - sw.x) * scale);\n  let heightPixels = Math.round((sw.y - ne.y) * scale);\n\n  // Find grid size in pixels\n  gridLengthPixels = Math.round(Math.min(widthPixels, heightPixels) / grids);\n  // here grids means extra grids rendered outside of screen:\n  let gridsCountX = grids + Math.ceil(widthPixels / gridLengthPixels);\n  let gridsCountY = grids + Math.ceil(heightPixels / gridLengthPixels);\n  console.log(gridsCountY);\n\n  let borderPixelLength = (grids * gridLengthPixels) / 2;\n  let pixelStartX = - borderPixelLength;\n  let pixelStartY = - borderPixelLength;\n  let pixelEndX = widthPixels + borderPixelLength;\n  let pixelEndY = heightPixels + borderPixelLength;\n\n  // Create grid - 2D array of objects: [X Position][Y Position]{}\n  // and set lat lng bounds of grids\n  let gridDataCollection = [];\n  for (let gridX = 0; gridX < gridsCountX; gridX++) {\n    gridDataCollection[gridX] = [];\n    for (let gridY = 0; gridY < gridsCountY; gridY++) {\n      let pixelX = (- borderPixelLength) + (gridX * gridLengthPixels);\n      let pixelY = (- borderPixelLength) + (gridY * gridLengthPixels);\n      let bounds = gridToBounds(pixelX, pixelY);\n\n      gridDataCollection[gridX][gridY] = {\n        dataPoints: [],\n        avgValue: null,\n        count: 0,\n        bounds: bounds,\n      };\n    }\n  }\n\n  // Add each data point to grid array\n  allDataPoints.forEach(function (dataPoint) {\n    // maybe get latLng of each grid instead - less processing?\n    latLngToPixels(dataPoint.latlng, function (pixelX, pixelY) {\n      if (\n        pixelX > pixelStartX &&\n        pixelX < pixelEndX &&\n        pixelY > pixelStartY &&\n        pixelY < pixelEndY\n      ) {\n        let gridX = Math.floor((pixelX - pixelStartX) / gridLengthPixels);\n        let gridY = Math.floor((pixelY - pixelStartY) / gridLengthPixels);\n        gridDataCollection[gridX][gridY].dataPoints.push(dataPoint.value);\n      }\n    });\n  });\n\n  // Get average data point value for each grid (null for no data points)\n  for (let gridX = 0; gridX < gridsCountX; gridX++) {\n    for (let gridY = 0; gridY < gridsCountY; gridY++) {\n      let dataPoints = gridDataCollection[gridX][gridY].dataPoints;\n      if (dataPoints.length > 0) {\n        let sum = dataPoints.reduce(function (a, b) {return parseInt(a) + parseInt(b);});\n        let average = sum / dataPoints.length;\n        gridDataCollection[gridX][gridY].avgValue = average;\n        gridDataCollection[gridX][gridY].count = dataPoints.length;\n\n        let bounds = gridDataCollection[gridX][gridY].bounds;\n\n        drawRectangle(bounds, average);\n      }\n    }\n  }\n}\n\nfunction blendGrid(gridDataCollection) {\n  let gridBlendedDataCollection = [];\n  for (let gridX = 1; gridX < gridDataCollection.length - 1; gridX++) {\n    gridBlendedDataCollection[gridX - 1] = [];\n    for (let gridY = 1; gridY < gridDataCollection[gridX].length - 1; gridY++) {\n      let total = 0; // total values for grid of 3 x 3\n      let count = 0;\n\n\n      for (let xIndex = gridX - 1; xIndex <= gridX + 1; xIndex++) {\n        for (let yIndex = gridY - 1; yIndex <= gridY + 1; yIndex++) {\n          let val = gridDataCollection[xIndex][yIndex];\n          if (val != null) {\n            count += parseInt(1);\n            total += parseFloat(val);\n          }\n        }\n      }\n\n      let dontShowGrid = ((count < 3) && (gridDataCollection[gridX][gridY] == null));\n      if (dontShowGrid) {\n        gridBlendedDataCollection[gridX - 1][gridY - 1] = null;\n      } else {\n        let avg = total / count;\n        gridBlendedDataCollection[gridX - 1][gridY - 1] = avg;\n      }\n    }\n  }\n\n  return gridBlendedDataCollection;\n}\n\nfunction blendOperation(gridValues, x, y, count, total) {\n  let val = gridValues[x][y];\n  if (!isNaN(val)) {\n    count += parseInt(1);\n    total += parseInt(val);\n  }\n}\n\nfunction pixelToPoint(pixelX, pixelY) {\n  return new google.maps.Point((pixelX / scale) + sw.x, (pixelY / scale) + ne.y);\n}\n\nfunction gridToBounds(pixelX, pixelY) {\n  let nePoint = pixelToPoint(pixelX, pixelY);\n  let swPoint = pixelToPoint(pixelX + gridLengthPixels, pixelY + gridLengthPixels);\n  let ne = projection.fromPointToLatLng(nePoint);\n  let sw = projection.fromPointToLatLng(swPoint);\n\n  let bounds = new google.maps.LatLngBounds(ne, sw);\n  return bounds;\n}\n\nfunction drawRectangle(bounds, value) {\n  if (value != null) {\n    let hue = (100 - value) * 0.6;\n    let colorString = 'hsl(' + hue + ', 100%, 50%)';\n    dataGrid.push(new google.maps.Rectangle({\n      strokeWeight: 0,\n      fillColor: colorString,\n      fillOpacity: 0.45,\n      map: map,\n      bounds: bounds,\n    }));\n  }\n}\n\nexport {\n  initGridOverlay,\n  hideDataGrid,\n  displayGrid,\n};\n"],"sourceRoot":""}